# IA 변경 마이그레이션 계획서

## 1. 변경 개요

현재 메뉴 구조를 새로운 시스템 기능 MAP에 맞게 재구성합니다.

---

## 2. 현재 vs 신규 메뉴 구조 비교

### 현재 구조 (AS)
```
AS 통합 시스템
├── 메인 대시보드
├── 회원관리
│   ├── 개인정보수정
│   ├── 회원관리
│   ├── 입주자
│   ├── 매니저
│   ├── 협력사
│   └── 관리자
├── AS 관리
│   ├── 접수 목록
│   ├── 세부 정보
│   └── 통계
├── 입주관리
│   ├── 방문예약 관리
│   ├── 세대현황
│   ├── 이사예약 관리
│   └── 입주관리 통계
├── 방문자 통계
│   └── (5개 하위메뉴)
├── AS 통계
│   └── (6개 하위메뉴)
├── 커뮤니티
│   ├── 공지사항
│   └── 자료실
├── 전자투표
│   ├── 메인화면
│   └── 세부창
├── 기초코드 관리
│   ├── 현장정보
│   ├── 동호정보
│   └── 하자정보
├── 스마트넷
│   ├── URL 생성
│   ├── 세부설정
│   └── 문자 발송
└── 관리자 전용
    ├── 메인화면
    ├── 업체별 현황
    └── 현장별 현황
```

### 신규 구조 (TO-BE)
```
상단 헤더
├── 메인
├── 내 정보 수정
└── 로그아웃

현장 메뉴 (사용자: 현장/조합)
├── 사전방문 [신규]
│   ├── 사전방문등록
│   └── 사전방문예약
├── 입주관리 [변경]
│   ├── 입주방문등록
│   └── 이사예약
├── 세대현황 [분리]
│   └── 세대목록
├── 통계 [통합]
│   ├── 사전방문
│   ├── A/S
│   ├── 입주관리
│   └── 현장관리
├── 커뮤니티 [유지]
│   ├── 공지
│   └── 자료실
├── 기초코드 관리 [변경]
│   ├── 동/호
│   └── 하자종류
├── 전자투표 [변경] (조합 전용)
│   ├── 조합원 명부
│   ├── 안건 등록
│   └── 투표 결과 (문서)
├── 사용자 관리 [변경]
│   ├── 입주자 관리
│   ├── 협력사 관리
│   └── 매니저 관리
└── 스마트넷 [변경]
    ├── 사전방문 생성
    ├── 이사예약 생성
    └── 전자투표 생성

전체 메뉴 (사용자: 컴패스)
└── 관리자 전용 [변경]
    ├── 팝업공지등록
    ├── 건설사 관리
    ├── 현장 관리
    └── 관리자 관리
```

---

## 3. 상세 변경 사항

### 3.1 삭제되는 메뉴
| 메뉴 | 경로 | 비고 |
|------|------|------|
| 메인 대시보드 | /dashboard | 상단 "메인"으로 대체 |
| AS 관리 | /as/manage | 전체 삭제 |
| 방문자 통계 | /visit/stats | "통계"로 통합 |
| AS 통계 | /as/stats | "통계"로 통합 |
| 회원관리 | /member | "사용자 관리"로 재구성 |

### 3.2 신규 추가 메뉴
| 메뉴 | 경로 | 하위메뉴 |
|------|------|----------|
| 사전방문 | /pre-visit | 사전방문등록, 사전방문예약 |
| 세대현황 | /units | 세대목록 |
| 통계 | /statistics | 사전방문, A/S, 입주관리, 현장관리 |

### 3.3 변경되는 메뉴

#### 입주관리 (/residence)
| AS-IS | TO-BE |
|-------|-------|
| 방문예약 관리 | 입주방문등록 |
| 세대현황 | (별도 메뉴로 분리) |
| 이사예약 관리 | 이사예약 |
| 입주관리 통계 | (통계 메뉴로 이동) |

#### 전자투표 (/vote)
| AS-IS | TO-BE |
|-------|-------|
| 메인화면 | 조합원 명부 |
| 세부창 | 안건 등록 |
| - | 투표 결과 (문서) |

#### 기초코드 관리 (/base)
| AS-IS | TO-BE |
|-------|-------|
| 현장정보 | (삭제) |
| 동호정보 | 동/호 |
| 하자정보 | 하자종류 |

#### 사용자 관리 (/user) - 기존 회원관리
| AS-IS | TO-BE |
|-------|-------|
| 개인정보수정 | (상단 헤더로 이동) |
| 회원관리 | (삭제) |
| 입주자 | 입주자 관리 |
| 매니저 | 매니저 관리 |
| 협력사 | 협력사 관리 |
| 관리자 | (관리자 전용으로 이동) |

#### 스마트넷 (/smartnet)
| AS-IS | TO-BE |
|-------|-------|
| URL 생성 | 사전방문 생성 |
| 세부설정 | 이사예약 생성 |
| 문자 발송 | 전자투표 생성 |

#### 관리자 전용 (/admin)
| AS-IS | TO-BE |
|-------|-------|
| 메인화면 | 팝업공지등록 |
| 업체별 현황 | 건설사 관리 |
| 현장별 현황 | 현장 관리 |
| - | 관리자 관리 |

---

## 4. 사용자 권한 구분

| 구분 | 색상 | 접근 가능 메뉴 |
|------|------|----------------|
| 현장 | 파란색 | 사전방문, 입주관리, 세대현황, 통계, 커뮤니티, 기초코드 관리, 사용자 관리, 스마트넷 |
| 조합 | 주황색 | 전자투표 |
| 컴패스 | 녹색 | 관리자 전용 |

---

## 5. 작업 순서

### Phase 1: menuConfig.ts 수정
1. 메뉴 구조 재정의
2. 메뉴 아이콘 매핑 업데이트
3. 사용자 권한별 메뉴 필터링 로직 추가

### Phase 2: 라우터 업데이트
1. 신규 경로 추가
2. 삭제된 경로 제거
3. 변경된 경로 리다이렉트 설정

### Phase 3: 페이지 컴포넌트 작업
1. 신규 페이지 생성
   - `/pages/PreVisit/` (사전방문등록, 사전방문예약)
   - `/pages/Units/` (세대목록)
   - `/pages/Statistics/` (사전방문, A/S, 입주관리, 현장관리)
2. 기존 페이지 이동/리네이밍
3. 불필요한 페이지 제거

### Phase 4: 헤더 컴포넌트 수정
1. 상단 "내 정보 수정" 버튼 추가
2. "로그아웃" 버튼 추가
3. 메인 링크 추가

### Phase 5: 권한 시스템 구현
1. 사용자 타입 정의 (현장/조합/컴패스)
2. 메뉴 필터링 로직 구현
3. 라우트 가드 설정

---

## 6. 파일 변경 목록

### 수정 필요 파일
- `src/config/menuConfig.ts` - 메뉴 구조 전체 재정의
- `src/types/menu.ts` - 권한 타입 추가
- `src/stores/menuStore.ts` - 권한별 필터링 로직

### 신규 생성 파일
```
src/pages/
├── PreVisit/
│   ├── PreVisitRegister.tsx    # 사전방문등록
│   └── PreVisitReservation.tsx # 사전방문예약
├── Units/
│   └── UnitsList.tsx           # 세대목록
├── Statistics/
│   ├── PreVisitStats.tsx       # 사전방문 통계
│   ├── ASStats.tsx             # A/S 통계
│   ├── ResidenceStats.tsx      # 입주관리 통계
│   └── SiteStats.tsx           # 현장관리 통계
├── Vote/
│   ├── MemberList.tsx          # 조합원 명부
│   ├── AgendaRegister.tsx      # 안건 등록
│   └── VoteResult.tsx          # 투표 결과
├── User/
│   ├── ResidentManage.tsx      # 입주자 관리
│   ├── PartnerManage.tsx       # 협력사 관리
│   └── ManagerManage.tsx       # 매니저 관리
└── Admin/
    ├── PopupNotice.tsx         # 팝업공지등록
    ├── ConstructorManage.tsx   # 건설사 관리
    ├── SiteManage.tsx          # 현장 관리
    └── AdminManage.tsx         # 관리자 관리
```

### 삭제/이동 대상 파일
- `src/pages/ASManageList.tsx` → 삭제 또는 통계로 통합
- `src/pages/Dashboard.tsx` → 메인으로 변경

---

## 7. 예상 작업량

| Phase | 작업 내용 | 주요 파일 수 |
|-------|----------|-------------|
| Phase 1 | menuConfig 수정 | 3개 |
| Phase 2 | 라우터 업데이트 | 1개 |
| Phase 3 | 페이지 컴포넌트 | ~15개 |
| Phase 4 | 헤더 수정 | 1~2개 |
| Phase 5 | 권한 시스템 | 2~3개 |

---

## 8. 체크리스트

- [ ] Phase 1: menuConfig.ts 메뉴 구조 변경
- [ ] Phase 1: 메뉴 아이콘 매핑 업데이트
- [ ] Phase 2: 라우터 경로 업데이트
- [ ] Phase 3: 사전방문 페이지 생성
- [ ] Phase 3: 세대현황 페이지 생성
- [ ] Phase 3: 통계 페이지 생성
- [ ] Phase 3: 전자투표 페이지 변경
- [ ] Phase 3: 사용자 관리 페이지 변경
- [ ] Phase 3: 스마트넷 페이지 변경
- [ ] Phase 3: 관리자 전용 페이지 변경
- [ ] Phase 4: 헤더 컴포넌트 수정
- [ ] Phase 5: 사용자 권한 시스템 구현
- [ ] 테스트 및 QA
